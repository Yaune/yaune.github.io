<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="[TOC] 枚举类枚举基础1. 杂记 比较两个枚举类型值时，不需要调用 equals 方法，直接用 == 即可。 switch case 表达式中直接写入枚举值，不需加入枚举类作为限定。  2. 概述枚举类特殊是因为它既是一种类(class)类型却又比普通类多了些特殊的约束，但是这些约束的存在也造就了枚举类型的简洁性、安全性以及便捷性。 一般定义常量都是：public static final….">
<meta property="og:type" content="article">
<meta property="og:title" content="ShiftJava&#x2F;A Java&#x2F;A-5 枚举类">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2021&#x2F;08&#x2F;07&#x2F;ShiftJava&#x2F;A%20Java&#x2F;A-5%20%E6%9E%9A%E4%B8%BE%E7%B1%BB&#x2F;index.html">
<meta property="og:site_name" content="路漫漫其修远兮">
<meta property="og:description" content="[TOC] 枚举类枚举基础1. 杂记 比较两个枚举类型值时，不需要调用 equals 方法，直接用 == 即可。 switch case 表达式中直接写入枚举值，不需加入枚举类作为限定。  2. 概述枚举类特殊是因为它既是一种类(class)类型却又比普通类多了些特殊的约束，但是这些约束的存在也造就了枚举类型的简洁性、安全性以及便捷性。 一般定义常量都是：public static final….">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2021-01-06T11:22:32.000Z">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"right","wideth":200,"display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":1},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2021/08/07/ShiftJava/A Java/A-5 枚举类/"/>





  <title>ShiftJava/A Java/A-5 枚举类 | 路漫漫其修远兮</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">路漫漫其修远兮</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/08/07/ShiftJava/A%20Java/A-5%20%E6%9E%9A%E4%B8%BE%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="路漫漫其修远兮">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ShiftJava/A Java/A-5 枚举类</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-07T19:04:14+08:00">
                2021-08-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>[TOC]</p>
<h3 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h3><h4 id="枚举基础"><a href="#枚举基础" class="headerlink" title="枚举基础"></a>枚举基础</h4><h5 id="1-杂记"><a href="#1-杂记" class="headerlink" title="1. 杂记"></a>1. 杂记</h5><ul>
<li>比较两个枚举类型值时，不需要调用 equals 方法，直接用 <strong>==</strong> 即可。</li>
<li>switch case 表达式中<strong>直接</strong>写入枚举值，不需加入枚举类作为限定。</li>
</ul>
<h5 id="2-概述"><a href="#2-概述" class="headerlink" title="2. 概述"></a>2. 概述</h5><p>枚举类特殊是因为它既是一种类(class)类型却又比普通类多了些<strong>特殊的约束</strong>，但是这些约束的存在也造就了枚举类型的简洁性、安全性以及便捷性。</p>
<p>一般定义常量都是：public static final….。有了枚举之后可以把相关的常量定义到一个<strong>枚举类</strong>里，而且枚举类也提供了比常量更多的操作方法来操纵。<strong>enum 类中的每个属性默认就是 ==static final== 的</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个枚举类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Size&#123;</span><br><span class="line">    SMALL, MEDIUM, LARGE</span><br><span class="line">&#125;;</span><br><span class="line">Size s = Enum.valueOf(Size.class, "SMALL"); // s = Size.SMALL;</span><br><span class="line">String a = Size.SMALL.toString();           <span class="comment">// a = "SMALL";</span></span><br><span class="line"><span class="keyword">int</span> b = Size.LARGE.ordinal();               <span class="comment">// b = 2;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>枚举的好处？</p>
</blockquote>
<p>以这种方式定义的常量使代码更具可读性，允许进行<strong>编译时检查</strong>，预先记录可接受值的列表，并避免由于传入无效值而引起的意外行为。</p>
<h5 id="3-枚举类常用方法"><a href="#3-枚举类常用方法" class="headerlink" title="3. 枚举类常用方法"></a>3. 枚举类常用方法</h5><table>
<thead>
<tr>
<th align="center">返回类型</th>
<th align="center">方法名称</th>
<th align="center">方法说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">int</td>
<td align="center"><strong>compareTo</strong>(E o)</td>
<td align="center">比较此枚举与指定对象的<strong>顺序</strong></td>
</tr>
<tr>
<td align="center">boolean</td>
<td align="center"><strong>equals</strong>(Object other)</td>
<td align="center">当指定对象等于此枚举常量时，返回 true。</td>
</tr>
<tr>
<td align="center">Class&lt;?&gt;</td>
<td align="center"><strong>getDeclaringClass</strong>()</td>
<td align="center">返回与此枚举常量的枚举类型相对应的 Class 对象</td>
</tr>
<tr>
<td align="center"><code>String</code></td>
<td align="center"><strong>name</strong>()</td>
<td align="center">返回此枚举常量的名称，在其枚举声明中对其进行声明</td>
</tr>
<tr>
<td align="center">int</td>
<td align="center"><strong>ordinal</strong>()</td>
<td align="center">返回枚举常量的<strong>序数</strong>（它在枚举声明中的<strong>位置</strong>，其中初始常量序数为 0）</td>
</tr>
<tr>
<td align="center">String</td>
<td align="center">toString()</td>
<td align="center">返回枚举常量的名称，它包含在声明中</td>
</tr>
<tr>
<td align="center">static&lt;T extends Enum&lt;T&gt;&gt; T</td>
<td align="center">static <strong>valueOf</strong>(Class&lt;T&gt; enumType, String name)</td>
<td align="center">返回带指定名称的指定枚举类型的枚举常量</td>
</tr>
</tbody></table>
<h5 id="4-枚举模板"><a href="#4-枚举模板" class="headerlink" title="4. 枚举模板"></a>4. 枚举模板</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Color &#123;  </span><br><span class="line">    RED(<span class="string">"红色"</span>, <span class="number">1</span>), </span><br><span class="line">    GREEN(<span class="string">"绿色"</span>, <span class="number">2</span>), </span><br><span class="line">    BLANK(<span class="string">"白色"</span>, <span class="number">3</span>), </span><br><span class="line">    YELLO(<span class="string">"黄色"</span>, <span class="number">4</span>);  <span class="comment">//定义枚举实例</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自定义成员变量  </span></span><br><span class="line">    <span class="keyword">private</span> String name;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> index;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义构造方法  </span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">(String name, <span class="keyword">int</span> index)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.name = name;  </span><br><span class="line">        <span class="keyword">this</span>.index = index;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// 添加方法  </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">for</span> (Color c : Color.values()) &#123;  </span><br><span class="line">            <span class="keyword">if</span> (c.getIndex() == index) &#123;  </span><br><span class="line">                <span class="keyword">return</span> c.name;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">// get set方法  </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> name;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.name = name;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getIndex</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> index;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.index = index;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5-构造方法"><a href="#5-构造方法" class="headerlink" title="5. 构造方法"></a>5. 构造方法</h5><p>枚举类的构造方法是特殊的存在，<strong>它可以定义，但是不能加 public 修饰符</strong>，因为它<strong>默认是 private</strong> 的，是绝对的单例，不允许外部以创建对象的方式生成枚举对象。</p>
<h4 id="原理解析"><a href="#原理解析" class="headerlink" title="原理解析"></a>原理解析</h4><h5 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h5><p>创建枚举类型要使用 enum 关键字，隐含了所创建的类型都是 java.lang.Enum 类的<strong>子类</strong>（java.lang.Enum 是一个<strong>抽象类</strong>）。枚举类型符合通用模式 Class <strong>Enum&lt;E extends Enum&lt;E&gt;&gt;</strong>，而 E 表示枚举类型的名称。</p>
<p>虽然都是定义类，但是 enum 关键字和 class 关键字的<strong>约束行为不同</strong>，class 定义的类可以通过 new 创建任意多个对象，而 enum 关键字定义的类，其<strong>实例对象</strong>只能在这个 enum 类中<strong>定义好</strong>，它的实例是<strong>有限</strong>的，外部是不能创建实例对象的。如果<strong>不自定义</strong>枚举类的<strong>成员变量和构造方法</strong>，只定义枚举<strong>实例</strong>，则枚举实例内容都将以<strong>字符串</strong>的形式存在，在<strong>类加载</strong>的时候虚拟机会通过 ==<strong>protected</strong>== <strong>Enum</strong>(String name, int ordinal) <strong>构造函数</strong>被创建为基本的 Enum <strong>实例</strong>。并且序数设置表示了此设置被创建的顺序。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> EnumTest &#123;</span><br><span class="line">	MON, TUE, WED, THU, FRI, SAT, SUN;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可自定义构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 由编译器调用protected构造方法</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">Enum</span><span class="params">(String name, <span class="keyword">int</span> ordinal)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.ordinal = ordinal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这段代码实际上调用了 7 次 Enum(String name, int ordinal)，由<strong>虚拟机创建了 7 个实例</strong>，注意是虚拟机调用的 protected 的方法，所以其他类<strong>无法再生成实例</strong>了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Enum&lt;EnumTest&gt;(<span class="string">"MON"</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">new</span> Enum&lt;EnumTest&gt;(<span class="string">"TUE"</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">new</span> Enum&lt;EnumTest&gt;(<span class="string">"WED"</span>,<span class="number">2</span>);</span><br><span class="line">... ...</span><br></pre></td></tr></table></figure>

<h5 id="2-class文件分析"><a href="#2-class文件分析" class="headerlink" title="2. class文件分析"></a>2. class文件分析</h5><p>enum 实际上就是一个 class，只不过 Java 编译器帮我们做了<strong>语法的解析和编译</strong>而已。</p>
<p><strong>javap</strong> 反编译 class 文件之后得到如下结果（<strong>省略</strong>了各个方法的字节码 <strong>code</strong> 部分）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public final class javase.enums.Color extends java.lang.Enum&lt;javase.enums.Color&gt; &#123;</span><br><span class="line">	// 枚举字段</span><br><span class="line">    public static final javase.enums.Color RED;</span><br><span class="line">    public static final javase.enums.Color GREEN;</span><br><span class="line">    public static final javase.enums.Color WHITE;</span><br><span class="line">    public static final javase.enums.Color YELLOW;</span><br><span class="line">    // 编译器自己加的方法</span><br><span class="line">    public static javase.enums.Color[] values();</span><br><span class="line">    public static javase.enums.Color valueOf(java.lang.String);</span><br><span class="line">    // 下面是自定义的方法</span><br><span class="line">    public static java.lang.String getName(int);</span><br><span class="line">    public java.lang.String getName();</span><br><span class="line">    public void setName(java.lang.String);</span><br><span class="line">    public int getIndex();</span><br><span class="line">    public void setIndex(int);</span><br><span class="line">    static &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>枚举类经过编译器编译之后产生的是一个 <strong>class</strong> 文件，该 class 文件经过<strong>反编译</strong>可以看到实际上是生成了一个类，该类<strong>继承</strong>了 java.lang.<strong>Enum</strong>。</p>
<p>可以看到定义的枚举值也被解释成了 <strong>static final</strong> 修饰的<strong>常量</strong>。同时编译器会为该类<strong>创建</strong>两个方法，分别是 <strong>values</strong>() 和 <strong>valueOf</strong>()，这两个方法都是<strong>静态方法</strong>。</p>
<p>从枚举类<strong>反编译</strong>得到的代码可以看到，枚举类编译出来的<strong>属性</strong>都是 <strong>static</strong> 类型的，而 static 类型的属性会在类被加载之后初始化，而 Java 类的<strong>加载和初始化</strong>过程都是<strong>线程安全</strong>的，所以<strong>创建</strong>一个 enum 类型是天生<strong>线程安全</strong>的。</p>
<h5 id="3-Enum类源码"><a href="#3-Enum类源码" class="headerlink" title="3. Enum类源码"></a>3. Enum类源码</h5><p>既然所有枚举类都<strong>继承与这个类</strong>，那看看 <strong>Enum 类</strong>的源码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现了Comparable</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Enum</span>&lt;<span class="title">E</span> <span class="keyword">extends</span> <span class="title">Enum</span>&lt;<span class="title">E</span>&gt;&gt; <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">E</span>&gt;, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 枚举字符串名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name; </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 枚举顺序值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> ordinal;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">ordinal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ordinal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// protected类型的枚举的构造方法，只能由编译器调用</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">Enum</span><span class="params">(String name, <span class="keyword">int</span> ordinal)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.ordinal = ordinal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object other)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span> == other;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实现Comparable接口的方法，比较的是ordinal值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(E o)</span> </span>&#123;</span><br><span class="line">        Enum&lt;?&gt; other = (Enum&lt;?&gt;)o;</span><br><span class="line">        Enum&lt;E&gt; self = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">if</span> (self.getClass() != other.getClass() &amp;&amp; <span class="comment">// optimization</span></span><br><span class="line">            self.getDeclaringClass() != other.getDeclaringClass())</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ClassCastException();</span><br><span class="line">        <span class="keyword">return</span> self.ordinal - other.ordinal;<span class="comment">//根据ordinal值比较大小</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Class&lt;E&gt; <span class="title">getDeclaringClass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取class对象引用，getClass()是Object的方法</span></span><br><span class="line">        Class&lt;?&gt; clazz = getClass();</span><br><span class="line">        <span class="comment">// 获取父类Class对象引用</span></span><br><span class="line">        Class&lt;?&gt; zuper = clazz.getSuperclass();</span><br><span class="line">        return (zuper == Enum.class) ? (Class&lt;E&gt;)clazz : (Class&lt;E&gt;)zuper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Enum&lt;T&gt;&gt; <span class="function">T <span class="title">valueOf</span><span class="params">(Class&lt;T&gt; enumType, String name)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// enumType.enumConstantDirectory()获取到的是一个map集合，key值就是name值，value则是枚举变量值   </span></span><br><span class="line">        <span class="comment">// enumConstantDirectory是class对象内部的方法，根据class对象获取一个map集合的值       </span></span><br><span class="line">        T result = enumType.enumConstantDirectory().get(name);</span><br><span class="line">        <span class="keyword">if</span> (result != <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        <span class="keyword">if</span> (name == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"Name is null"</span>);</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">            <span class="string">"No enum constant "</span> + enumType.getCanonicalName() + <span class="string">"."</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//.....省略其他没用的方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到<strong>枚举</strong>的<strong>构造方法</strong>是 <strong>protected</strong> 类型的，只能由<strong>编译器调用</strong>。可以看出 Enum 实现了 Comparable 接口，这也是可以使用 <strong>compareTo</strong> 比较的原因。由于 Java 单继承的原因，enum 类并不能再继承其它类，但并不妨碍它实现接口，因此 enum 类<strong>同样是可以实现多接口</strong>的。</p>
<h4 id="枚举与设计模式"><a href="#枚举与设计模式" class="headerlink" title="枚举与设计模式"></a>枚举与设计模式</h4><h5 id="1-枚举与单例模式"><a href="#1-枚举与单例模式" class="headerlink" title="1. 枚举与单例模式"></a>1. 枚举与单例模式</h5><h6 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="(1) 概述"></a>(1) 概述</h6><p>更详细的单例模式可以参考设计模式相关部分内容。</p>
<p>《Effective Java 》和《Java与模式》都<strong>非常推荐</strong>这种方式。这种方法在功能上与<strong>公有域方法</strong>相近，但是它更加简洁，<strong>无偿提供了序列化机制，绝对防止多次实例化</strong>，即使是在面对<strong>复杂序列化或者反射攻击</strong>的时候。但是<strong>==单元素==的枚举类型已经成为实现 Singleton 的最佳方法</strong>。 —《Effective Java 中文版 第二版》</p>
<p>使用枚举来实现单实例控制会更加简洁，而且无偿地提供了序列化机制，并<strong>由 JVM 从根本上提供保障，绝对防止多次实例化</strong>，是更简洁、高效、安全的实现单例的方式。—《Java与模式》</p>
<p>以下是简单的<strong>枚举实现</strong>单例模式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 枚举单例</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span>  SingletonEnum &#123;</span><br><span class="line">   </span><br><span class="line">    INSTANCE;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以像<strong>常规类</strong>一样编写 enum 类，为其添加变量和方法，使用 <strong>SingletonEnum.INSTANCE</strong> 进行<strong>访问</strong>，这样也就<strong>避免调用 getInstance 方法</strong>，更重要的是使用枚举单例的写法，<strong>完全不用考虑序列化和反射的问题</strong>。</p>
<h6 id="2-安全分析"><a href="#2-安全分析" class="headerlink" title="(2) 安全分析"></a>(2) 安全分析</h6><p><strong>首先是==序列化与反序列化破坏单例==的问题。</strong></p>
<p><strong>枚举序列化</strong>是由 <strong>JVM 保证</strong>的，每一个枚举类型和定义的枚举变量在 JVM 中都是<strong>唯一</strong>的，在枚举类型的<strong>序列化和反序列化</strong>上，Java 做了特殊的规定：在<strong>序列化</strong>时 Java 仅仅是将枚举对象的 <strong>name 属性输出到结果</strong>中，<strong>反序列化</strong>的时候则是通过java.lang.Enum 的 <strong>valueOf 方法</strong>来根据名字<strong>查找</strong>枚举对象。同时编译器是<strong>不允许任何对这种序列化机制的定制</strong>的并<strong>禁用</strong>了 writeObject、readObject、readObjectNoData、writeReplace 和 readResolve 等方法，从而保证了枚举实例的<strong>唯一性</strong>。所以<strong>枚举序列化</strong>确实<strong>不会重新创建新实例</strong>，JVM 保证了每个枚举实例变量的唯一性。</p>
<p><strong>然后是==反射破坏单例==的问题。</strong></p>
<p>再看<strong>反射</strong>到底能不能创建枚举，下面试图通过反射获取<strong>构造器</strong>并创建枚举。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IllegalAccessException, InvocationTargetException, InstantiationException, NoSuchMethodException </span>&#123;</span><br><span class="line">    <span class="comment">// 获取枚举类的构造函数</span></span><br><span class="line">    Constructor&lt;SingletonEnum&gt; constructor=SingletonEnum<span class="class">.<span class="keyword">class</span>.<span class="title">getDeclaredConstructor</span>(<span class="title">String</span>.<span class="title">class</span>, <span class="title">int</span>.<span class="title">class</span>)</span>;</span><br><span class="line">    constructor.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">    <span class="comment">// 创建枚举</span></span><br><span class="line">    SingletonEnum singleton = constructor.newInstance(<span class="string">"otherInstance"</span>, <span class="number">9</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行报错：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.lang.IllegalArgumentException: Cannot reflectively create <span class="keyword">enum</span> objects</span><br><span class="line">    at java.lang.reflect.Constructor.newInstance(Constructor.java:<span class="number">417</span>)</span><br><span class="line">    at zejian.SingletonEnum.main(SingletonEnum.java:<span class="number">38</span>)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">    at java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)</span><br><span class="line">    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:<span class="number">144</span>)</span><br></pre></td></tr></table></figure>

<p>这里显然<strong>不能使用反射创建枚举类</strong>。这是为什么？不妨看看 <strong>newInstance</strong> 方法源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">newInstance</span><span class="params">(Object ... initargs)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> InstantiationException, IllegalAccessException,</span></span><br><span class="line"><span class="function">IllegalArgumentException, InvocationTargetException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!override) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!Reflection.quickCheckMemberAccess(clazz, modifiers)) &#123;</span><br><span class="line">            Class&lt;?&gt; caller = Reflection.getCallerClass();</span><br><span class="line">            checkAccess(caller, clazz, <span class="keyword">null</span>, modifiers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 这里判断Modifier.ENUM是不是枚举修饰符，如果是就抛异常</span></span><br><span class="line">    <span class="keyword">if</span> ((clazz.getModifiers() &amp; Modifier.ENUM) != <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Cannot reflectively create enum objects"</span>);</span><br><span class="line">    ConstructorAccessor ca = constructorAccessor;   <span class="comment">// read volatile</span></span><br><span class="line">    <span class="keyword">if</span> (ca == <span class="keyword">null</span>) &#123;</span><br><span class="line">        ca = acquireConstructorAccessor();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    T inst = (T) ca.newInstance(initargs);</span><br><span class="line">    <span class="keyword">return</span> inst;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所以确实无法使用反射创建枚举实例，也就是<strong>说明了创建枚举实例只有编译器能够做到而已</strong>。显然枚举单例模式确实是很不错的选择，因此推荐使用它。</p>
<h5 id="2-策略模式"><a href="#2-策略模式" class="headerlink" title="2. 策略模式"></a>2. 策略模式</h5><p><strong>枚举类</strong>中也可以包含<strong>抽象方法</strong>，但是必须定义枚举实例并且<strong>立即重写抽象方法</strong>。</p>
<p>通常，策略模式由<strong>不同类实现同一个接口</strong>来实现的，也就是添加<strong>新策略</strong>意味着添加<strong>新的实现类</strong>。使用枚举，可以轻松完成此任务，<strong>添加新的实现</strong>意味着只定义具有某个实现的<strong>另一个实例</strong>。</p>
<p>下面使用枚举实现<strong>策略模式</strong>的例子，也就是将不同的<strong>实现</strong>定义为枚举类的不同的<strong>实例</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> PizzaDeliveryStrategy &#123;</span><br><span class="line">    </span><br><span class="line">    EXPRESS &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deliver</span><span class="params">(Pizza pz)</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"Pizza will be delivered in express mode"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    NORMAL &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deliver</span><span class="params">(Pizza pz)</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"Pizza will be delivered in normal mode"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"> 	<span class="comment">// 抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">deliver</span><span class="params">(Pizza pz)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>给  Pizza 类实现抽象方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deliver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isDeliverable()) &#123;</span><br><span class="line">        PizzaDeliverySystemConfiguration.getInstance().getDeliveryStrategy()</span><br><span class="line">          .deliver(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">this</span>.setStatus(PizzaStatus.DELIVERED);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如何使用呢？请看下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Pizza pz = <span class="keyword">new</span> Pizza();</span><br><span class="line">    pz.setStatus(Pizza.PizzaStatus.READY);</span><br><span class="line">    pz.deliver();</span><br><span class="line">    assertTrue(pz.getStatus() == Pizza.PizzaStatus.DELIVERED);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ul>
<li>（贼详细的枚举原理解析）<a href="https://www.cnblogs.com/zhanqing/" target="_blank" rel="noopener">https://www.cnblogs.com/zhanqing/</a></li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/08/07/ShiftJava/A%20Java/A-6%20%E5%B8%B8%E7%94%A8%E7%B1%BB/" rel="next" title="ShiftJava/A Java/A-6 常用类">
                <i class="fa fa-chevron-left"></i> ShiftJava/A Java/A-6 常用类
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/08/07/ShiftJava/A%20Java/A-4%20%E5%86%85%E9%83%A8%E7%B1%BB/" rel="prev" title="ShiftJava/A Java/A-4 内部类">
                ShiftJava/A Java/A-4 内部类 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Yue</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">163</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#枚举类"><span class="nav-number">1.</span> <span class="nav-text">枚举类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#枚举基础"><span class="nav-number">1.1.</span> <span class="nav-text">枚举基础</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-杂记"><span class="nav-number">1.1.1.</span> <span class="nav-text">1. 杂记</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-概述"><span class="nav-number">1.1.2.</span> <span class="nav-text">2. 概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-枚举类常用方法"><span class="nav-number">1.1.3.</span> <span class="nav-text">3. 枚举类常用方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-枚举模板"><span class="nav-number">1.1.4.</span> <span class="nav-text">4. 枚举模板</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-构造方法"><span class="nav-number">1.1.5.</span> <span class="nav-text">5. 构造方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原理解析"><span class="nav-number">1.2.</span> <span class="nav-text">原理解析</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-概述"><span class="nav-number">1.2.1.</span> <span class="nav-text">1. 概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-class文件分析"><span class="nav-number">1.2.2.</span> <span class="nav-text">2. class文件分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-Enum类源码"><span class="nav-number">1.2.3.</span> <span class="nav-text">3. Enum类源码</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#枚举与设计模式"><span class="nav-number">1.3.</span> <span class="nav-text">枚举与设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-枚举与单例模式"><span class="nav-number">1.3.1.</span> <span class="nav-text">1. 枚举与单例模式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-概述-1"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">(1) 概述</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-安全分析"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">(2) 安全分析</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-策略模式"><span class="nav-number">1.3.2.</span> <span class="nav-text">2. 策略模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#参考资料"><span class="nav-number">1.4.</span> <span class="nav-text">参考资料</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yue</span>

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
